{"version":3,"file":"commonHelpers2.js","sources":["../src/js/template/shoppingListTemplate.js","../src/js/helpers/localStorageHelper.js","../src/js/pagination.js","../src/js/shopping-list.js"],"sourcesContent":["import amazon from '../../img/amazon-1x.png';\nimport apple from '../../img/apple-1x.png';\nimport amazon2x from '../../img/amazon-2x.png';\nimport apple2x from '../../img/apple-2x.png';\nimport icons from '../../img/icons/icons.svg';\n\nexport default function templateList({\n  _id,\n  list_name,\n  author,\n  title,\n  book_image,\n  description,\n  buy_links,\n}) {\n  return `<li class=\"shopping-item\" data-id=\"${_id}\">\n            <img\n              class=\"shopping-img\"\n              src=\"${book_image}\"\n              alt=\"${title}\"\n            />\n            <div class=\"shopping-wrap\">\n              <div class=\"heading-info\">\n                <div class=\"title-container\">\n                  <h2 class=\"title-book\">\n                    ${title}\n                  </h2>\n                  <p class=\"category-book\">${list_name}</p>\n                </div>\n                <button\n                  class=\"delete-shopping-item-btn\"\n                  \n                >\n                  <svg class=\"trash-btn-icon\" height=\"16\" width=\"16\">\n                    <use href=\"${icons}#icon-trash\"></use>\n                  </svg>\n                </button>\n              </div>\n              <p class=\"descr-shopping\">${description}</p>\n              <div class=\"author-info-container\">\n                <p class=\"author-info\">${author}</p>\n                ${murkupLinks(buy_links)}\n              </div>\n            </div>\n          </li>`;\n}\n\nfunction murkupLinks(buy_links) {\n  const amazonUrl = buy_links.find(elem => elem.name === 'Amazon').url;\n  const appleBookUrl = buy_links.find(elem => elem.name === 'Apple Books').url;\n  return `<ul class=\"shop-link-list\">\n              <li class=\"\"shop-link-item>\n                <a class=\"shop-link-amazon\" href=\"${amazonUrl}\" target=\"_blank\">\n                   <img src=\"${amazon}\" srcset=\"${amazon2x} 2x\" alt=\"Amazon\" class=\"amazon-image\">\n                </a>\n              </li>\n              <li class=\"\"shop-link-item>\n                <a class=\"shop-link-amazon\" href=\"${appleBookUrl}\" target=\"_blank\">\n                    <img src=\"${apple}\" srcset=\"${apple2x} 2x\" alt=\"Apple-books\" class=\"apple-books-image\">\n                </a>\n              </li>\n          </ul>`;\n}\n","/**\n * Об'єкт-утиліта для взаємодії з локальним сховищем браузера.\n */\nconst LocalStorage = {\n  /**\n   * Визначає, чи підтримує браузер локальне сховище.\n   *\n   * @return {boolean}\n   */\n  isSupported() {\n    return typeof Storage !== 'undefined';\n  },\n\n  /**\n   * Перевіряє, чи існує ключ у локальному сховищі.\n   *\n   * @param {string} key\n   * @return {boolean}\n   */\n  has(key) {\n    return localStorage.hasOwnProperty(key);\n  },\n\n  /**\n   * Отримує значення з локального сховища за ключем.\n   *\n   * @param {string} key\n   * @return {any}\n   */\n  get(key) {\n    let item = localStorage.getItem(key);\n\n    if (typeof item !== 'string') return item;\n\n    if (item === 'undefined') return undefined;\n\n    if (item === 'null') return null;\n\n    // Перевірка для чисел і десяткових дробів\n    if (/^'-?\\d{1,}?\\.?\\d{1,}'$/.test(item)) return Number(item);\n\n    // Перевірка для чисел у науковій нотації\n    if (/^'-?\\d{1}\\.\\d+e\\+\\d{2}'$/.test(item)) return Number(item);\n\n    // Перевірка для серіалізованих об'єктів та масивів\n    if (item[0] === '{' || item[0] === '[') return JSON.parse(item);\n\n    return item;\n  },\n\n  /**\n   * Зберігає значення в локальному сховищі за ключем.\n   *\n   * @param {string} key\n   * @param {any} value\n   * @return {void}\n   */\n  set(key, value) {\n    if (typeof key !== 'string') {\n      throw new TypeError(\n        `localStorage: Ключ повинен бути рядком. (зчитування '${key}')`\n      );\n    }\n\n    if (typeof value === 'object' || Array.isArray(value)) {\n      value = JSON.stringify(value);\n    }\n\n    localStorage.setItem(key, value);\n  },\n\n  /**\n   * Видаляє елемент з локального сховища за ключем.\n   *\n   * @param {string} key\n   * @return {void}\n   */\n  remove(key) {\n    localStorage.removeItem(key);\n  },\n};\n\nexport default LocalStorage;\n","import Pagination from 'tui-pagination';\nimport 'tui-pagination/dist/tui-pagination.css';\nimport '../css/pagination.css';\nimport renderMarkup from './helpers/renderMarkup';\nimport shoppingListTemplate from './template/shoppingListTemplate';\nimport LocalStorage from './helpers/localStorageHelper';\n\nconst storeName = 'cart';\n\nexport function createPagination(containerCart, currentBooks, page = 1) {\n  // контейнер для пагінації\n  const pagContainer = document.querySelector('#tui-pagination-container');\n\n  // значення для різної ширини екрану\n  let visiblePages = 2;\n  let itemsPerPage = 4;\n  if (window.innerWidth >= 768) {\n    visiblePages = 3;\n    itemsPerPage = 3;\n  }\n  // налаштування для ширини екрану\n  const options = {\n    totalItems: currentBooks.length,\n    itemsPerPage,\n    visiblePages,\n    centerAlign: true,\n  };\n  if (currentBooks.length / itemsPerPage <= 1) {\n    pagContainer.style.display = 'none';\n  }\n  // створення пагінації\n  const pagination = new Pagination(pagContainer, options);\n\n  // слухач переходу по сторінках\n  pagination.on('beforeMove', event => {\n    const currentPage = event.page;\n    const booksOnPage = currentBooks.slice(\n      (currentPage - 1) * itemsPerPage,\n      currentPage * itemsPerPage\n    );\n    const books = renderMarkup(shoppingListTemplate, booksOnPage);\n    containerCart.innerHTML = books;\n  });\n  pagination.movePageTo(page);\n  return pagination;\n}\n\n// тест\n/* createPagination(20); */\n","import './header';\nimport './pagination';\nimport './support-section';\nimport LocalStorage from './helpers/localStorageHelper';\nimport renderMarkup from './helpers/renderMarkup';\nimport shoppingListTemplate from './template/shoppingListTemplate';\nimport { refs } from './refs';\nimport { createPagination } from './pagination';\nconst listOfBook = document.querySelector('.js-shopping-main');\nconst storeName = 'cart';\nlet pag;\n\nfunction renderItem() {\n  refs.shoppingListMain.innerHTML = '';\n  const data = LocalStorage.get(storeName);\n  const isStorageEmpty = !data || !data.length;\n  if (isStorageEmpty) {\n    refs.shoppingEmpty.classList.remove('hidden');\n    listOfBook.style.display = 'none';\n  } else {\n    refs.shoppingText.style.marginBottom = '40px';\n    refs.shoppingEmpty.classList.add('hidden');\n    pag = createPagination(refs.shoppingListMain, data);\n    listOfBook.addEventListener('click', handleDeleteClick);\n  }\n}\nfunction handleDeleteClick(e) {\n  if (\n    e.target.tagName === 'BUTTON' ||\n    e.target.tagName === 'svg' ||\n    e.target.tagName === 'use'\n  ) {\n    const booksInCart = LocalStorage.get(storeName);\n\n    const item = e.target.closest('.shopping-item');\n    const filteredBooks = booksInCart.filter(\n      ({ _id }) => _id !== item.dataset.id\n    );\n    localStorage.setItem(storeName, JSON.stringify(filteredBooks));\n    item.remove();\n    const isStorageEmpty = !filteredBooks || !filteredBooks.length;\n    if (isStorageEmpty) {\n      refs.shoppingEmpty.classList.remove('hidden');\n      listOfBook.style.display = 'none';\n    }\n    let currentPage = pag.getCurrentPage();\n    createPagination(refs.shoppingListMain, filteredBooks, currentPage);\n  }\n}\nrenderItem();\n"],"names":["templateList","_id","list_name","author","title","book_image","description","buy_links","icons","murkupLinks","amazonUrl","elem","appleBookUrl","amazon","amazon2x","apple","apple2x","LocalStorage","key","item","value","createPagination","containerCart","currentBooks","page","pagContainer","visiblePages","itemsPerPage","options","pagination","Pagination","event","currentPage","booksOnPage","books","renderMarkup","shoppingListTemplate","listOfBook","storeName","pag","renderItem","refs","data","handleDeleteClick","booksInCart","filteredBooks"],"mappings":"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"}
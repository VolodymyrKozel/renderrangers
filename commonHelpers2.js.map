{"version":3,"file":"commonHelpers2.js","sources":["../src/js/helpers/pagination.js","../src/js/helpers/localStorageHelper.js","../src/js/shopping-list.js"],"sourcesContent":["\nimport Pagination from 'tui-pagination';\n// import 'tui-pagination/dist/tui-pagination.css';\n\nconst pagContainer = document.querySelector('#pagination');\nconst options = {\n  itemsPerPage: 4,\n  visiblePages: 2,\n  page: 1,\n  centerAlign: true,\n  firstItemClassName: 'tui-first-child',\n  lastItemClassName: 'tui-last-child',\n  template: {\n    page: '<a href=\"#\" class=\"tui-page-button\">{{page}}</a>',\n    currentPage:\n      '<strong class=\"tui-page-button tui-is-selected\">{{page}}</strong>',\n    moreButton:\n      '<a href=\"#\" class=\"tui-page-button tui-{{type}}-is-ellip\">' +\n      '<span class=\"tui-ico-ellip\">...</span>' +\n      '</a>',\n  },\n};\n\nexport const pagination = new Pagination(pagContainer, options);\n","/**\n * Об'єкт-утиліта для взаємодії з локальним сховищем браузера.\n */\nconst LocalStorage = {\n  /**\n   * Визначає, чи підтримує браузер локальне сховище.\n   *\n   * @return {boolean}\n   */\n  isSupported() {\n    return typeof Storage !== 'undefined';\n  },\n\n  /**\n   * Перевіряє, чи існує ключ у локальному сховищі.\n   *\n   * @param {string} key\n   * @return {boolean}\n   */\n  has(key) {\n    return localStorage.hasOwnProperty(key);\n  },\n\n  /**\n   * Отримує значення з локального сховища за ключем.\n   *\n   * @param {string} key\n   * @return {any}\n   */\n  get(key) {\n    let item = localStorage.getItem(key);\n\n    if (typeof item !== 'string') return item;\n\n    if (item === 'undefined') return undefined;\n\n    if (item === 'null') return null;\n\n    // Перевірка для чисел і десяткових дробів\n    if (/^'-?\\d{1,}?\\.?\\d{1,}'$/.test(item)) return Number(item);\n\n    // Перевірка для чисел у науковій нотації\n    if (/^'-?\\d{1}\\.\\d+e\\+\\d{2}'$/.test(item)) return Number(item);\n\n    // Перевірка для серіалізованих об'єктів та масивів\n    if (item[0] === '{' || item[0] === '[') return JSON.parse(item);\n\n    return item;\n  },\n\n  /**\n   * Зберігає значення в локальному сховищі за ключем.\n   *\n   * @param {string} key\n   * @param {any} value\n   * @return {void}\n   */\n  set(key, value) {\n    if (typeof key !== 'string') {\n      throw new TypeError(\n        `localStorage: Ключ повинен бути рядком. (зчитування '${key}')`\n      );\n    }\n\n    if (typeof value === 'object' || Array.isArray(value)) {\n      value = JSON.stringify(value);\n    }\n\n    localStorage.setItem(key, value);\n  },\n\n  /**\n   * Видаляє елемент з локального сховища за ключем.\n   *\n   * @param {string} key\n   * @return {void}\n   */\n  remove(key) {\n    localStorage.removeItem(key);\n  },\n};\n\nexport default LocalStorage;\n","import './header';\nimport './helpers/pagination';\nimport { getDataBooks } from './Api/uBooksApi';\nimport LocalStorage from './helpers/localStorageHelper';\nimport renderMarkup from './helpers/renderMarkup';\nimport { refs } from './refs';\nconst storeName = 'cart';\n// async function getBookById(id) {\n//   const data = await getDataBooks(id);\n//   const books = [];\n//   LocalStorage.has('cart') ? books.push(LocalStorage.get('cart')) : LocalStorage.set('cart', books);\n//   books.push(data);\n//   LocalStorage.set('cart', books);\n// }\n\n// getBookById('643282b1e85766588626a0dc');\n// getBookById('643282b1e85766588626a0ae');\n\nfunction templateList({\n  _id,\n  list_name,\n  author,\n  title,\n  book_image,\n  description,\n  buy_links,\n}) {\n  return `<li class=\"shopping-item\" data-id=\"${_id}\">\n            <img\n              class=\"shopping-img\"\n              src=\"${book_image}\"\n              alt=\"${title}\"\n            />\n            <div class=\"shopping-wrap\">\n              <div class=\"heading-info\">\n                <div class=\"title-container\">\n                  <h2 class=\"title-book\">\n                    ${title}\n                  </h2>\n                  <p class=\"category-book\">${list_name}</p>\n                </div>\n                <button\n                  class=\"delete-shopping-item-btn\"\n                  \n                >\n                  <svg class=\"trash-btn-icon\" height=\"16\" width=\"16\">\n                    <use href=\"./img/icons/icons.svg#icon-trash\"></use>\n                  </svg>\n                </button>\n              </div>\n              <p class=\"descr-shopping\">${description}</p>\n              <div class=\"author-info-container\">\n                <p class=\"author-info\">${author}</p>\n                ${murkupLinks(buy_links)}\n              </div>\n            </div>\n          </li>`;\n}\n\nfunction murkupLinks(buy_links) {\n  const amazon = buy_links.find(elem => elem.name === 'Amazon').url;\n  const appleBook = buy_links.find(elem => elem.name === 'Apple Books').url;\n  return `<ul class=\"shop-link-list\">\n              <li class=\"\"shop-link-item>\n                <a class=\"shop-link-amazon\" href=\"${amazon}\" target=\"_blank\">\n                   <img src=\"./img/amazon.png\" alt=\"Amazon\" class=\"amazon-image\">\n                </a>\n              </li>\n              <li class=\"\"shop-link-item>\n                <a class=\"shop-link-amazon\" href=\"${appleBook}\" target=\"_blank\">\n                    <img src=\"./img/apple-1x.png\" alt=\"Apple-books\" class=\"apple-books-image\">\n                </a>\n              </li>\n          </ul>`;\n}\n\nfunction renderItem() {\n  refs.shoppingListMain.innerHTML = '';\n  let data = LocalStorage.get(storeName);\n\n  const isStorageEmpty = !data || !data.length;\n  if (isStorageEmpty) return;\n\n  refs.shoppingText.style.marginBottom = '40px';\n  refs.shoppingEmpty.classList.add('hidden');\n  const books = renderMarkup(templateList, data);\n  refs.shoppingListMain.innerHTML = books;\n  const listOfBook = document.querySelector('.js-shopping-main');\n  console.log(listOfBook);\n  listOfBook.addEventListener('click', handleDeleteClick);\n}\n\nfunction handleDeleteClick(e) {\n  if (\n    e.target.tagName === 'BUTTON' ||\n    e.target.tagName === 'svg' ||\n    e.target.tagName === 'use'\n  ) {\n    const item = e.target.closest('.shopping-item');\n    const booksInCart = LocalStorage.get(storeName);\n    const filteredBooks = booksInCart.filter(\n      ({ _id }) => _id !== item.dataset.id\n    );\n    localStorage.setItem(storeName, JSON.stringify(filteredBooks));\n    item.remove();\n  }\n}\n\nrenderItem();\n\n//hide aside\nif (window.innerWidth < 1440) {\n  console.log('1440');\n  document.querySelector('.aside').style.display = 'none';\n}\n"],"names":["pagContainer","options","Pagination","LocalStorage","key","item","value","storeName","templateList","_id","list_name","author","title","book_image","description","buy_links","murkupLinks","amazon","elem","appleBook","renderItem","refs","data","books","renderMarkup","listOfBook","handleDeleteClick","filteredBooks"],"mappings":"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"}
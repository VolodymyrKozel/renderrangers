{"version":3,"file":"commonHelpers2.js","sources":["../src/js/pagination.js","../src/js/helpers/localStorageHelper.js","../src/js/template/shoppingListTemplate.js","../src/js/shopping-list.js"],"sourcesContent":["import Pagination from 'tui-pagination';\nimport 'tui-pagination/dist/tui-pagination.css';\nimport '../css/pagination.css';\n\nimport { getBookById } from './modal';\n\nconst pagContainer = document.querySelector('#tui-pagination-container');\n\nlet visiblePages = 2;\nlet itemsPerPage = 4;\nif (window.innerWidth >= 768) {\n  visiblePages = 3;\n  itemsPerPage = 3;\n}\n\n// const shoppingList = localStorage.getItem('shoppingList');\n// console.log(shoppingList);\n// const listObj = JSON.parse(shoppingList);\n\n// const shoppingListArr = Object.keys(listObj);\n// console.log(shoppingListArr);\n\nconst options = {\n  // totalItems: shoppingListArr.length,\n  itemsPerPage,\n  visiblePages,\n};\n\nexport const pagination = new Pagination(pagContainer, options);\n\n// pagination.on('beforeMove', event => {\n//   if (shoppingListArr.length / itemsPerPage <= 1) {\n//     return;\n//   }\n\n//   const currentPage = event.page;\n\n//   getBookById(\n//     shoppingListArr.slice(\n//       (currentPage - 1) * itemsPerPage,\n//       currentPage * itemsPerPage\n//     )\n//   );\n// });\n\npagination.movePageTo(1)","/**\n * Об'єкт-утиліта для взаємодії з локальним сховищем браузера.\n */\nconst LocalStorage = {\n  /**\n   * Визначає, чи підтримує браузер локальне сховище.\n   *\n   * @return {boolean}\n   */\n  isSupported() {\n    return typeof Storage !== 'undefined';\n  },\n\n  /**\n   * Перевіряє, чи існує ключ у локальному сховищі.\n   *\n   * @param {string} key\n   * @return {boolean}\n   */\n  has(key) {\n    return localStorage.hasOwnProperty(key);\n  },\n\n  /**\n   * Отримує значення з локального сховища за ключем.\n   *\n   * @param {string} key\n   * @return {any}\n   */\n  get(key) {\n    let item = localStorage.getItem(key);\n\n    if (typeof item !== 'string') return item;\n\n    if (item === 'undefined') return undefined;\n\n    if (item === 'null') return null;\n\n    // Перевірка для чисел і десяткових дробів\n    if (/^'-?\\d{1,}?\\.?\\d{1,}'$/.test(item)) return Number(item);\n\n    // Перевірка для чисел у науковій нотації\n    if (/^'-?\\d{1}\\.\\d+e\\+\\d{2}'$/.test(item)) return Number(item);\n\n    // Перевірка для серіалізованих об'єктів та масивів\n    if (item[0] === '{' || item[0] === '[') return JSON.parse(item);\n\n    return item;\n  },\n\n  /**\n   * Зберігає значення в локальному сховищі за ключем.\n   *\n   * @param {string} key\n   * @param {any} value\n   * @return {void}\n   */\n  set(key, value) {\n    if (typeof key !== 'string') {\n      throw new TypeError(\n        `localStorage: Ключ повинен бути рядком. (зчитування '${key}')`\n      );\n    }\n\n    if (typeof value === 'object' || Array.isArray(value)) {\n      value = JSON.stringify(value);\n    }\n\n    localStorage.setItem(key, value);\n  },\n\n  /**\n   * Видаляє елемент з локального сховища за ключем.\n   *\n   * @param {string} key\n   * @return {void}\n   */\n  remove(key) {\n    localStorage.removeItem(key);\n  },\n};\n\nexport default LocalStorage;\n","export default function templateList({\n  _id,\n  list_name,\n  author,\n  title,\n  book_image,\n  description,\n  buy_links,\n}) {\n  return `<li class=\"shopping-item\" data-id=\"${_id}\">\n            <img\n              class=\"shopping-img\"\n              src=\"${book_image}\"\n              alt=\"${title}\"\n            />\n            <div class=\"shopping-wrap\">\n              <div class=\"heading-info\">\n                <div class=\"title-container\">\n                  <h2 class=\"title-book\">\n                    ${title}\n                  </h2>\n                  <p class=\"category-book\">${list_name}</p>\n                </div>\n                <button\n                  class=\"delete-shopping-item-btn\"\n                  \n                >\n                  <svg class=\"trash-btn-icon\" height=\"16\" width=\"16\">\n                    <use href=\"../img/icons/icons.svg#icon-trash\"></use>\n                  </svg>\n                </button>\n              </div>\n              <p class=\"descr-shopping\">${description}</p>\n              <div class=\"author-info-container\">\n                <p class=\"author-info\">${author}</p>\n                ${murkupLinks(buy_links)}\n              </div>\n            </div>\n          </li>`;\n}\n\nfunction murkupLinks(buy_links) {\n  const amazon = buy_links.find(elem => elem.name === 'Amazon').url;\n  const appleBook = buy_links.find(elem => elem.name === 'Apple Books').url;\n  return `<ul class=\"shop-link-list\">\n              <li class=\"\"shop-link-item>\n                <a class=\"shop-link-amazon\" href=\"${amazon}\" target=\"_blank\">\n                   <img src=\"../img/amazon-1x.png\" srcset=\"../img/amazon-2x.png 2x\" alt=\"Amazon\" class=\"amazon-image\">\n                </a>\n              </li>\n              <li class=\"\"shop-link-item>\n                <a class=\"shop-link-amazon\" href=\"${appleBook}\" target=\"_blank\">\n                    <img src=\"../img/apple-1x.png\" srcset=\"../img/apple-2x.png 2x\" alt=\"Apple-books\" class=\"apple-books-image\">\n                </a>\n              </li>\n          </ul>`;\n}\n","import './header';\nimport './pagination';\nimport LocalStorage from './helpers/localStorageHelper';\nimport renderMarkup from './helpers/renderMarkup';\nimport shoppingListTemplate from './template/shoppingListTemplate';\nimport { refs } from './refs';\nconst storeName = 'cart';\n\nfunction renderItem() {\n  refs.shoppingListMain.innerHTML = '';\n  const data = LocalStorage.get(storeName);\n  const isStorageEmpty = !data || !data.length;\n  if (isStorageEmpty) return;\n  refs.shoppingText.style.marginBottom = '40px';\n  refs.shoppingEmpty.classList.add('hidden');\n  const books = renderMarkup(shoppingListTemplate, data);\n  refs.shoppingListMain.innerHTML = books;\n  const listOfBook = document.querySelector('.js-shopping-main');\n  listOfBook.addEventListener('click', handleDeleteClick);\n}\n\nfunction handleDeleteClick(e) {\n  if (\n    e.target.tagName === 'BUTTON' ||\n    e.target.tagName === 'svg' ||\n    e.target.tagName === 'use'\n  ) {\n    const item = e.target.closest('.shopping-item');\n    const booksInCart = LocalStorage.get(storeName);\n    const filteredBooks = booksInCart.filter(\n      ({ _id }) => _id !== item.dataset.id\n    );\n    localStorage.setItem(storeName, JSON.stringify(filteredBooks));\n    item.remove();\n  }\n}\nrenderItem();\n//hide aside\nif (window.innerWidth < 1440) {\n  console.log('1440');\n  document.querySelector('.aside').style.display = 'none';\n}\n\n/* function removeItem(itemId) {\n  let data = LocalStorage.get('cart');\n  const itemIndex = data.findIndex(item => item._id === itemId);\n  if (itemIndex !== -1) {\n      data.splice(itemIndex, 1);\n      LocalStorage.set('cart', data);\n      renderItem();\n  }\n}\n\nfunction isDeleteBtnClick(e) {\n  const isDeleteBtn = e.target.classList.contains('delete-shopping-item-btn') ||\n    e.target.closest('.trash-btn-icon');\n  if (isDeleteBtn) {\n      const itemId = e.target.closest('.shopping-item').id;\n      removeItem(itemId);\n  }\n} */\n"],"names":["pagContainer","visiblePages","itemsPerPage","options","pagination","Pagination","LocalStorage","key","item","value","templateList","_id","list_name","author","title","book_image","description","buy_links","murkupLinks","amazon","elem","appleBook","storeName","renderItem","refs","data","books","renderMarkup","shoppingListTemplate","handleDeleteClick","filteredBooks"],"mappings":"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"}